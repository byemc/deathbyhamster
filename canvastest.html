<style>
    canvas {
        border: 1px solid black;
        width: 400px;
        height: 200px;
        image-rendering: pixelated;
    }
</style>
<canvas id="canvas" width="100" height="50"></canvas>
<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var gun = new Image();
gun.src = "./gun.png";
var mousePos = {
    x: 0,
    y: 0
};


canvas.addEventListener("mousemove", function(event) {
    mousePos.x = event.clientX - canvas.offsetLeft;
    mousePos.y = event.clientY - canvas.offsetTop;
});



ctx.drawImage(gun, 50,25, gun.width, gun.height);

setInterval(function() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // get the angle between the gun and the mouse
    ctx.translate(canvas.width / 2, canvas.height / 2);
    var angle = Math.atan2(mousePos.y - canvas.height / 2, mousePos.x - canvas.width / 2);
    ctx.rotate(angle);
    ctx.translate(-canvas.width / 2, -canvas.height / 2);
    ctx.drawImage(gun, canvas.width/2, canvas.height/2, gun.width, gun.height);
} , 1000 / 60);

</script>